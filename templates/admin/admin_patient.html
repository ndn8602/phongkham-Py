{% extends "base.html" %} {% block content %}

<body id="page-top">
  <!-- Page Wrapper -->
  <div id="wrapper">
    <!-- Sidebar -->
    <ul
      class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion"
      id="accordionSidebar"
    >
      <!-- Sidebar - Brand -->
      <a
        class="sidebar-brand d-flex align-items-center justify-content-center"
        href="index.html"
      >
        <div class="sidebar-brand-icon rotate-n-15">
          <i class="fas fa-laugh-wink"></i>
        </div>
        <div class="sidebar-brand-text mx-3">SB Admin <sup>2</sup></div>
      </a>

      <!-- Divider -->
      <hr class="sidebar-divider my-0" />

      <!-- Nav Item - Dashboard -->
      <li class="nav-item active">
        <a class="nav-link" href="index.html">
          <i class="fas fa-fw fa-tachometer-alt"></i>
          <span>Dashboard</span></a
        >
      </li>

      <!-- Divider -->
      <hr class="sidebar-divider" />

      <!-- Heading -->
      <div class="sidebar-heading">Interface</div>

      <!-- Nav Item - Pages Collapse Menu -->
      <!-- data-toggle="collapse" data-target="#collapseTwo"
            aria-expanded="true" aria-controls="collapseTwo" -->
      <li class="nav-item">
        <a class="nav-link collapsed" href="/admin/doctor">
          <i class="fa fa-user-md" aria-hidden="true"></i>
          <span>Doctor</span>
        </a>
        <!-- <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionSidebar">
                    <div class="bg-white py-2 collapse-inner rounded">
                        <h6 class="collapse-header">Custom Components:</h6>
                        <a class="collapse-item" href="buttons.html">Buttons</a>
                        <a class="collapse-item" href="cards.html">Cards</a>
                    </div>
                </div> -->
      </li>

      <!-- Nav Item - Utilities Collapse Menu -->
      <!-- data-toggle="collapse" data-target="#collapseUtilities"
                    aria-expanded="true" aria-controls="collapseUtilities" -->
      <li class="nav-item">
        <a class="nav-link collapsed" href="/admin/patient">
          <i class="fa fa-wheelchair" aria-hidden="true"></i>
          <span>Patient</span>
        </a>
      </li>

      <!-- Divider -->
      <hr class="sidebar-divider" />

      <!-- Divider -->
      <hr class="sidebar-divider d-none d-md-block" />

      <!-- Sidebar Toggler (Sidebar) -->
      <div class="text-center d-none d-md-inline">
        <button class="rounded-circle border-0" id="sidebarToggle"></button>
      </div>
    </ul>
    <!-- End of Sidebar -->

    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">
      <!-- Main Content -->
      <div id="content">
        <!-- Topbar -->
        <nav
          class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow"
        ></nav>
        <!-- End of Topbar -->

        <!-- Begin Page Content -->
        <div class="container-fluid">
          <button
            class="btn btn-success"
            id="btn-add_doctor"
            data-bs-toggle="modal"
            data-bs-target="#exampleModal"
          >
            Add
          </button>
          <table class="table">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">id</th>
                <th scope="col">Fullname</th>
                <th scope="col">Gender</th>
                <th scope="col">Clinic</th>
                <th scope="col">Phone</th>
                <th scope="col">Email</th>
                <th scope="col">Date</th>
              </tr>
            </thead>
            <tbody>
              {% for doctor in doctors %}
              <tr
                class="row-doctor"
                data-bs-toggle="modal"
                data-bs-target="#exampleModal"
              >
                <th>{{loop.index}}</th>
                <th>{{doctor._id}}</th>
                <td>{{doctor.fullname}}</td>
                <td>{{doctor.gender}}</td>
                <td>{{doctor.clinic}}</td>
                <td>{{doctor.phoneNumber}}</td>
                <td>{{doctor.email}}</td>
                <td>{{doctor.date}}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        <!-- /.container-fluid -->
        <div
          class="modal fade"
          id="exampleModal"
          tabindex="-1"
          aria-labelledby="exampleModalLabel"
          aria-hidden="true"
        >
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Patient</h1>
                <button
                  type="button"
                  class="btn-close"
                  data-bs-dismiss="modal"
                  aria-label="Close"
                ></button>
              </div>
              <div class="modal-body">
                <form
                  class="doctor"
                  method="POST"
                  action="/admin/patient/submit"
                >
                  <div class="mb-3">
                    <label for="infoPatientName" class="form-label"
                      >FullName</label
                    >
                    <input
                      type="text"
                      name="name"
                      class="form-control"
                      id="infoPatientName"
                      aria-describedby="emailHelp"
                    />
                  </div>
                  <div class="form-floating mb-3">
                    <select
                      class="form-select"
                      id="infoPatientGender"
                      aria-label="Floating label select example"
                      name="gender"
                    >
                      <option selected>Gender :</option>
                      <option value="1Male">Male</option>
                      <option value="Female">Female</option>
                      <option value="Orther">Orther</option>
                    </select>
                    <label for="infoPatientGender">Choose a gender</label>
                  </div>
                  <div class="form-floating mb-3">
                    <select
                      class="form-select"
                      id="infoPatientClinic"
                      aria-label="Floating label select example"
                      name="room"
                    >
                      <option selected>Hospital or Clinic :</option>
                      <option value="Trung Tâm Chăm Sóc Lys Clinic">
                        Trung Tâm Chăm Sóc Lys Clinic
                      </option>
                      <option value="Phòng khám chuyên khoa hô hấp Phổi Việt">
                        Phòng khám chuyên khoa hô hấp Phổi Việt
                      </option>
                      <option value="Phòng khám CarePlus Quận 7">
                        Phòng khám CarePlus Quận 7
                      </option>
                      <option value="Trung Tâm Chăm Sóc Lys Clinic">
                        Trung Tâm Chăm Sóc Lys Clinic
                      </option>
                    </select>
                    <label for="infoPatientClinic">Hospital or Clinic</label>
                  </div>

                  <div class="mb-3">
                    <label for="infoPatientPhone" class="form-label"
                      >Phone Number</label
                    >
                    <input
                      type="text"
                      name="phone"
                      class="form-control"
                      id="infoPatientPhone"
                    />
                  </div>
                  <div class="mb-3">
                    <label for="infoPetientAddress" class="form-label"
                      >Address</label
                    >
                    <input
                      type="text"
                      name="address"
                      class="form-control"
                      id="infoPetientAddress"
                    />
                  </div>
                  <div class="mb-3">
                    <label for="infoPetientEmail" class="form-label"
                      >Email</label
                    >
                    <input
                      type="text"
                      name="email"
                      class="form-control"
                      id="infoPetientEmail"
                    />
                  </div>
                  <div class="mb-3">
                    <label for="infoPatientDate" class="form-label">Date</label>
                    <input
                      type="date"
                      name="date"
                      class="form-control"
                      id="infoPatientDate"
                    />
                  </div>
                  <input
                    type="hidden"
                    name="id"
                    class="form-control"
                    id="infoPatientId"
                  />

                  <span class="btn-store">
                    <button
                      type="submit"
                      name="update"
                      class="btn btn-primary"
                      data-bs-dismiss="modal"
                    >
                      Update
                    </button>
                    <button
                      type="submit"
                      name="remove"
                      class="btn btn-danger"
                      data-bs-dismiss="modal"
                    >
                      Remove
                    </button>
                  </span>
                </form>
              </div>
              <div class="modal-footer">
                <button
                  type="button"
                  class="btn btn-secondary"
                  data-bs-dismiss="modal"
                >
                  Close
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- End of Main Content -->

      <!-- Footer -->
      <footer class="sticky-footer bg-white">
        <div class="container my-auto">
          <div class="copyright text-center my-auto">
            <span>Copyright &copy; Your Website 2021</span>
          </div>
        </div>
      </footer>
      <!-- End of Footer -->
    </div>
    <!-- End of Content Wrapper -->
  </div>
  <!-- End of Page Wrapper -->

  <!-- Scroll to Top Button-->
  <a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
  </a>

  <!-- Logout Modal-->
  <div
    class="modal fade"
    id="logoutModal"
    tabindex="-1"
    role="dialog"
    aria-labelledby="exampleModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
          <button
            class="close"
            type="button"
            data-dismiss="modal"
            aria-label="Close"
          >
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body">
          Select "Logout" below if you are ready to end your current session.
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" type="button" data-dismiss="modal">
            Cancel
          </button>
          <a class="btn btn-primary" href="login.html">Logout</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap core JavaScript-->
  <script src="{{ url_for('static',filename='vendor/jquery/jquery.min.js') }}"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Core plugin JavaScript-->

  <!-- Custom scripts for all pages-->

  <!-- Page level plugins -->
  <script src="{{ url_for('static',filename='vendor/chart.js/Chart.min.js') }}"></script>

  <!-- Page level custom scripts -->
  <script src="{{ url_for('static',filename='js/demo/chart-area-demo.js') }}"></script>
  <script src="{{ url_for('static',filename='js/demo/chart-pie-demo.js') }}"></script>
  <script defer>
    const btnOrder = `
                    <button type="submit" name="update" class="btn btn-primary"
                        data-bs-dismiss="modal">Update</button>
                    <button type="submit" name="remove" class="btn btn-danger"
                        data-bs-dismiss="modal">Remove</button>
                `;
    const btnAdd = `
                    <button type="submit" name="add" class="btn btn-primary"
                        data-bs-dismiss="modal">add</button>
                `;

    const rows = document.querySelectorAll(".row-doctor");

    // onclick cho mỗi row
    rows.forEach((row) => {
      row.addEventListener("click", function (event) {
        // Truy xuất thông tin về dòng được nhấp vào
        // console.dir(event.currentTarget);
        currentDoctor = event.currentTarget;
        // console.dir(currentDoctor.children[1])

        btnStore.innerHTML = btnOrder;

        //binding dữ liệu lên modal
        document.getElementById("infoPatientId").value =
          currentDoctor.children[1].innerHTML;
        document.getElementById("infoPatientName").value =
          currentDoctor.children[2].innerHTML;
        document.getElementById("infoPatientGender").value =
          currentDoctor.children[3].innerHTML;
        document.getElementById("infoPatientClinic").value =
          currentDoctor.children[4].innerHTML;
        document.getElementById("infoPatientPhone").value =
          currentDoctor.children[5].innerHTML;
        document.getElementById("infoDoctorEmail").value =
          currentDoctor.children[6].innerHTML;
        document.getElementById("infoPatientDate").value =
          currentDoctor.children[7].innerHTML;
        document.getElementById("infoPetientAddress").value =
          currentDoctor.children[8].innerHTML;
      });
    });

    const btnAddDoctor = document.getElementById("btn-add_doctor");
    const btnStore = document.querySelector(".btn-store");

    btnAddDoctor.addEventListener("click", function (event) {
      currentDoctor = event.currentTarget.innerHTML + "";
      console.dir(currentDoctor);
      if (currentDoctor == "Add") {
        btnStore.innerHTML = btnAdd;
      } else {
        btnStore.innerHTML = btnOrder;
      }
    });
  </script>
</body>

{% endblock content %}
